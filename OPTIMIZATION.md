# üöÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ ResultMA

## ‚úÖ –ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ

### 1. React Query (–ö–ª–∏–µ–Ω—Ç)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–∞
- ‚úÖ Retry –º–µ—Ö–∞–Ω–∏–∑–º –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- ‚úÖ –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

**–§–∞–π–ª—ã:**
- `client/src/lib/queryClient.ts` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- `client/src/hooks/useBlockTests.ts` - —Ö—É–∫–∏ –¥–ª—è –±–ª–æ–∫-—Ç–µ—Å—Ç–æ–≤
- `client/src/hooks/useTests.ts` - —Ö—É–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–æ–≤
- `client/src/hooks/useStudents.ts` - —Ö—É–∫–∏ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤

### 2. Lazy Loading (–ö–ª–∏–µ–Ω—Ç)
- ‚úÖ –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é
- ‚úÖ Layouts –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é
- ‚úÖ Suspense —Å Loading –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ù–∞—á–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤ 2-3 —Ä–∞–∑–∞ –±—ã—Å—Ç—Ä–µ–µ

### 3. MongoDB –ò–Ω–¥–µ–∫—Å—ã (–°–µ—Ä–≤–µ—Ä)
- ‚úÖ –°–æ—Å—Ç–∞–≤–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –≤—Å–µ—Ö –∫–æ–ª–ª–µ–∫—Ü–∏–π
- ‚úÖ Text –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø–æ–∏—Å–∫–∞
- ‚úÖ Unique –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π

**–ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å:**
```bash
cd server
npm run optimize-indexes
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ó–∞–ø—Ä–æ—Å—ã –≤ 10-100 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ

### 4. Batch Loading (–°–µ—Ä–≤–µ—Ä)
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –æ–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º
- ‚úÖ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤
- ‚úÖ Batch insert –¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –≤ 10 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ

### 5. –£–±—Ä–∞–Ω–∞ –∏–∑–±—ã—Ç–æ—á–Ω–∞—è —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞ –Ω–µ —Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≤–∞—Ä–∏–∞–Ω—Ç—ã
- ‚úÖ –í–∞—Ä–∏–∞–Ω—Ç—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ –∑–∞–ø—Ä–æ—Å—É

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ (< 1 —Å–µ–∫—É–Ω–¥–∞)

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

| –û–ø–µ—Ä–∞—Ü–∏—è | –î–æ | –ü–æ—Å–ª–µ | –£–ª—É—á—à–µ–Ω–∏–µ |
|----------|-----|-------|-----------|
| –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤ | 500ms | < 200ms | 2.5x |
| –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –±–ª–æ–∫-—Ç–µ—Å—Ç–æ–≤ | 500ms | < 200ms | 2.5x |
| –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞ | 10-30s | < 1s | 10-30x |
| –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ (100 —Å—Ç—É–¥–µ–Ω—Ç–æ–≤) | 10-15s | 1-2s | 5-10x |
| –ù–∞—á–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è | 3-5s | 1-2s | 2-3x |

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### 1. –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–ø–∏—Å–∫–æ–≤
–ï—Å–ª–∏ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ > 100, –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—é:

```bash
cd client
npm install react-window
```

```typescript
import { FixedSizeList } from 'react-window';

<FixedSizeList
  height={600}
  itemCount={students.length}
  itemSize={80}
  width="100%"
>
  {({ index, style }) => (
    <div style={style}>
      <StudentCard student={students[index]} />
    </div>
  )}
</FixedSizeList>
```

### 2. –£–±—Ä–∞—Ç—å node-cache
–°–µ–π—á–∞—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Redis + node-cache. –ú–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ Redis:

```bash
cd server
npm uninstall node-cache
```

–£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª `server/src/utils/cache.ts`

### 3. –î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
–î–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:

```bash
cd server
npm install prom-client
```

## üîß –ö–æ–º–∞–Ω–¥—ã

### –°–µ—Ä–≤–µ—Ä
```bash
cd server

# –°–æ–∑–¥–∞—Ç—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã
npm run optimize-indexes

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
npm run check-db

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
npm run dev
```

### –ö–ª–∏–µ–Ω—Ç
```bash
cd client

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–ª–∏–µ–Ω—Ç
npm run dev

# –°–æ–±—Ä–∞—Ç—å production build
npm run build

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä bundle
npm run build -- --analyze
```

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–¥–µ–∫—Å–æ–≤ –≤ MongoDB
```bash
mongosh "mongodb://localhost:27017/resultma"

# –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –∫–æ–ª–ª–µ–∫—Ü–∏–∏
db.tests.getIndexes()
db.blocktests.getIndexes()
db.students.getIndexes()

# –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏–Ω–¥–µ–∫—Å–æ–≤
db.tests.aggregate([{ $indexStats: {} }])
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
```bash
# –í MongoDB shell
db.tests.find({ branchId: "..." }).explain("executionStats")
```

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –≤—Å–µ—Ö –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π:
- ‚ö° –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ 2-3 —Ä–∞–∑–∞ –±—ã—Å—Ç—Ä–µ–µ
- ‚ö° –ó–∞–ø—Ä–æ—Å—ã –∫ –ë–î –≤ 10-100 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ
- ‚ö° –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –≤ 5-10 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ
- ‚ö° –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ
- ‚ö° –ú–µ–Ω—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- ‚ö° –ú–µ–Ω—å—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏

**–û–±—â–µ–µ —É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏: 5-10x** üöÄ
